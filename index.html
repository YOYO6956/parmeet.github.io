<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SugarPie Network</title>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;700;900&display=swap" rel="stylesheet">
    
    <style>
        /* BASE RESET */
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Outfit', sans-serif; }

        body {
            background-color: #020005; 
            color: #fff;
            overflow: hidden; /* Lock scroll until login */
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            perspective: 1200px;
            user-select: none; 
        }

        /* HYPERSPACE CANVAS */
        #warp-canvas {
            position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; z-index: 0; cursor: crosshair;
        }

        /* --- TOP LEFT USER PROFILE --- */
        .user-profile {
            position: fixed;
            top: 30px;
            left: 40px;
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 50px;
            padding: 8px 25px 8px 8px;
            display: flex;
            align-items: center;
            gap: 15px;
            z-index: 100;
            opacity: 0; /* Hidden until login */
            transform: translateX(-50px);
            transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }
        .user-head { width: 45px; height: 45px; border-radius: 50%; border: 2px solid #ff007f; }
        .user-info { display: flex; flex-direction: column; }
        .user-name { font-weight: 700; font-size: 1.1rem; color: #fff; }
        .user-status { font-size: 0.75rem; color: #00ff88; text-transform: uppercase; letter-spacing: 1px; }

        /* --- LIVE PLAYER COUNTER --- */
        .player-counter {
            position: fixed; top: 30px; right: 40px;
            background: rgba(15, 5, 25, 0.7); backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 0, 127, 0.4); border-radius: 50px;
            padding: 12px 25px; display: flex; align-items: center; gap: 12px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.8), 0 0 20px rgba(255, 0, 127, 0.2);
            z-index: 100; font-size: 1.1rem; color: #fff; font-weight: 700;
            transition: all 0.3s ease; cursor: default;
            opacity: 0; transform: translateY(-20px);
        }
        .live-dot {
            width: 12px; height: 12px; background-color: #00ff88; border-radius: 50%;
            box-shadow: 0 0 10px #00ff88, 0 0 20px #00ff88; animation: pulseDot 1.5s infinite alternate;
        }

        /* --- LOGIN POPUP --- */
        #login-overlay {
            position: fixed; top: 0; left: 0; width: 100vw; height: 100vh;
            background: rgba(2, 0, 5, 0.85); backdrop-filter: blur(15px);
            z-index: 5000; display: flex; justify-content: center; align-items: center;
            transition: all 0.5s ease-in-out;
        }
        .login-box {
            background: rgba(20, 10, 30, 0.6); border: 2px solid #ff007f;
            padding: 40px; border-radius: 30px; text-align: center; width: 400px; max-width: 90%;
            box-shadow: 0 0 50px rgba(255, 0, 127, 0.4); transform: scale(0);
            animation: popIn 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
        }
        .skin-avatar {
            width: 100px; height: 100px; border-radius: 15px; border: 3px solid #fff;
            box-shadow: 0 0 20px rgba(255, 255, 255, 0.5); margin-bottom: 20px;
        }
        .login-input {
            width: 100%; padding: 15px; background: rgba(0,0,0,0.5);
            border: 1px solid #ff8e8b; border-radius: 10px; color: #fff;
            font-size: 1.1rem; text-align: center; outline: none; margin-bottom: 20px; transition: 0.3s;
        }
        .login-input:focus { border-color: #ff007f; box-shadow: 0 0 15px rgba(255, 0, 127, 0.6); }

        .bedrock-option { display: flex; align-items: center; justify-content: center; gap: 10px; margin-bottom: 25px; cursor: pointer; }
        .switch { position: relative; display: inline-block; width: 50px; height: 26px; }
        .switch input { opacity: 0; width: 0; height: 0; }
        .slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #ccc; transition: .4s; border-radius: 34px; }
        .slider:before { position: absolute; content: ""; height: 18px; width: 18px; left: 4px; bottom: 4px; background-color: white; transition: .4s; border-radius: 50%; }
        input:checked + .slider { background-color: #ff007f; }
        input:checked + .slider:before { transform: translateX(24px); }
        .bedrock-label { font-size: 0.9rem; color: #bbb; }

        .enter-btn {
            background: linear-gradient(90deg, #ff007f, #ff6b6b); color: white; border: none;
            padding: 15px 40px; font-size: 1.2rem; font-weight: bold; border-radius: 50px;
            cursor: pointer; transition: 0.3s; box-shadow: 0 5px 15px rgba(255, 0, 127, 0.4); text-transform: uppercase; width: 100%;
        }
        .enter-btn:hover { transform: scale(1.05); box-shadow: 0 10px 30px rgba(255, 0, 127, 0.7); }

        /* --- MAIN LAYOUT --- */
        .glass-wrapper {
            position: relative; z-index: 10; display: flex; flex-direction: column; align-items: center;
            padding: 100px 20px 50px 20px; width: 100%; max-width: 1400px;
            opacity: 0; transform: scale(0.95); transition: all 0.8s ease-out; pointer-events: none;
        }
        .wrapper-visible { opacity: 1 !important; transform: scale(1) !important; }

        h1 {
            font-size: 5rem; font-weight: 900;
            background: linear-gradient(135deg, #ff007f, #ff8e8b, #fff);
            -webkit-background-clip: text; -webkit-text-fill-color: transparent;
            margin-bottom: 5px; text-shadow: 0px 10px 30px rgba(255, 0, 127, 0.4);
            animation: floatText 4s ease-in-out infinite;
        }
        .subtitle { font-size: 1.2rem; color: #d1b3ff; letter-spacing: 3px; margin-bottom: 50px; text-transform: uppercase; }
        .hint-text {
            color: rgba(255, 255, 255, 0.6); font-size: 0.95rem; letter-spacing: 2px;
            margin-bottom: 25px; animation: pulseHint 2s infinite;
            background: rgba(255, 255, 255, 0.05); padding: 8px 15px; border-radius: 20px;
        }

        /* GRID */
        .grid { display: flex; gap: 30px; justify-content: center; flex-wrap: wrap; pointer-events: auto; width: 100%; }

        .card {
            background: rgba(15, 5, 25, 0.6); backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 24px; padding: 30px;
            width: 320px; text-align: center;
            box-shadow: 0 20px 50px rgba(0,0,0,0.8);
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            display: flex; flex-direction: column;
        }
        .card:hover {
            transform: translateY(-10px) scale(1.02); border-color: rgba(255, 0, 127, 0.6);
            box-shadow: 0 30px 60px rgba(0,0,0,0.9), 0 0 40px rgba(255, 0, 127, 0.3);
        }
        .card h2 { font-size: 1.6rem; margin-bottom: 10px; color: #fff; border-bottom: 2px solid rgba(255, 0, 127, 0.3); padding-bottom: 10px; }

        /* --- STORE STYLING --- */
        .rank-list { list-style: none; text-align: left; margin-bottom: auto; margin-top: 10px; }
        .rank-item {
            display: flex; justify-content: space-between; align-items: center;
            margin-bottom: 12px; padding-bottom: 8px; border-bottom: 1px solid rgba(255,255,255,0.05);
        }
        .rank-info { display: flex; flex-direction: column; }
        .rank-name { font-weight: bold; font-size: 1.1rem; color: #ff8e8b; }
        .rank-perk { font-size: 0.8rem; color: #aaa; }
        .rank-price { font-weight: bold; color: #00ff88; font-size: 1rem; }
        
        /* Store Disclaimer */
        .disclaimer {
            margin-top: 15px;
            font-size: 0.75rem;
            color: #999;
            border-top: 1px solid rgba(255,255,255,0.1);
            padding-top: 10px;
            line-height: 1.4;
        }
        .secure-badge { color: #00ff88; font-weight: bold; }
        .no-refund { color: #ff4d4d; font-weight: bold; text-transform: uppercase; }

        .btn {
            display: inline-block; width: 100%; padding: 12px 0; border-radius: 12px;
            font-size: 1.1rem; font-weight: 700; cursor: pointer; border: none; text-decoration: none;
            transition: 0.3s; text-transform: uppercase; margin-top: 20px;
        }
        .btn-mc { background: linear-gradient(90deg, #ff007f, #ff6b6b); color: #fff; }
        .btn-discord { background: #5865F2; color: #fff; display: flex; justify-content: center; gap: 10px; }
        
        /* New Discord Store Button Style */
        .btn-store { 
            background: linear-gradient(90deg, #5865F2, #ff007f); 
            color: #fff; 
            box-shadow: 0 5px 15px rgba(88, 101, 242, 0.3);
        }

        .btn:hover { transform: translateY(-3px); box-shadow: 0 10px 20px rgba(0,0,0,0.5); }

        .ip-display {
            background: rgba(0,0,0,0.8); padding: 15px; border-radius: 12px; font-family: monospace;
            font-size: 1.3rem; font-weight: bold; color: #fff; border: 1px dashed rgba(255, 255, 255, 0.3);
            margin-bottom: auto; margin-top: 20px; cursor: pointer; transition: 0.3s;
        }
        .ip-display:hover {
            border-color: #ff007f; transform: scale(1.05);
            background: linear-gradient(to right, #ffffff 0%, #ff007f 20%, #ff8e8b 40%, #ffffff 100%);
            background-size: 200% auto; -webkit-background-clip: text; -webkit-text-fill-color: transparent;
            animation: shine 2s linear infinite;
        }
        @keyframes shine { to { background-position: 200% center; } }
        @keyframes floatText { 0%, 100% { transform: translateY(0px); } 50% { transform: translateY(-10px); } }
        @keyframes pulseDot { 0% { transform: scale(1); opacity: 0.7; } 100% { transform: scale(1.3); opacity: 1; } }
        @keyframes popIn { 0% { transform: scale(0) translateY(50px); opacity: 0; } 100% { transform: scale(1) translateY(0); opacity: 1; } }
        @keyframes zoomOut { 0% { transform: scale(1); opacity: 1; } 100% { transform: scale(3); opacity: 0; } }

        /* Rules list */
        .rules-list { text-align: left; list-style: none; margin-top: 10px;}
        .rules-list li { margin-bottom: 12px; padding-left: 25px; position: relative; font-size: 1rem; color: #d1b3ff; }
        .rules-list li::before { content: 'â€¢'; position: absolute; left: 0; color: #ff007f; font-size: 1.5rem; line-height: 1rem; }

        @media (max-width: 768px) {
            .player-counter { top: 15px; right: 10px; padding: 8px 15px; font-size: 0.9rem; }
            .user-profile { top: 15px; left: 10px; padding: 5px 15px 5px 5px; }
            .user-head { width: 35px; height: 35px; }
            .user-name { font-size: 0.9rem; }
        }
    </style>
</head>
<body>

    <canvas id="warp-canvas"></canvas>

    <div class="user-profile" id="user-profile">
        <img src="https://minotar.net/helm/steve/100.png" class="user-head" id="profile-head">
        <div class="user-info">
            <span class="user-name" id="profile-name">Steve</span>
            <span class="user-status">Logged In</span>
        </div>
    </div>

    <div class="player-counter" id="counter-pill">
        <div class="live-dot" id="status-dot"></div>
        <div id="player-count">Pinging...</div>
    </div>

    <div id="login-overlay">
        <div class="login-box">
            <img src="https://minotar.net/helm/steve/100.png" id="skin-preview" class="skin-avatar">
            <h2 style="font-size: 2rem; margin-bottom: 5px; text-transform: uppercase;">Identity Gate</h2>
            <div style="color: #aaa; margin-bottom: 25px;">Enter username to initialize...</div>
            <input type="text" id="username-input" class="login-input" placeholder="Your Username" autocomplete="off">
            <div class="bedrock-option">
                <label class="switch">
                    <input type="checkbox" id="bedrock-toggle">
                    <span class="slider"></span>
                </label>
                <span class="bedrock-label">I'm a Bedrock Player (Adds .)</span>
            </div>
            <button class="enter-btn" onclick="enterSite()">ENTER WORLD</button>
        </div>
    </div>

    <div class="glass-wrapper" id="main-content">
        <h1 id="main-title">SugarPie</h1>
        <div class="subtitle">Next-Gen Survival Experience</div>
        <div class="hint-text">[ CLICK AND HOLD FOR WARP SPEED ]</div>

        <div class="grid">
            <div class="card">
                <h2>Join Server</h2>
                <p style="color: #aaa; margin-bottom: auto;">Ready for adventure? Copy the IP below!</p>
                <div class="ip-display" id="server-ip">play.sugarpie.net</div>
                <button class="btn btn-mc" onclick="copyIP()">Copy IP Address</button>
            </div>

            <div class="card">
                <h2>Server Rules</h2>
                <ul class="rules-list">
                    <li>No hacking or x-raying.</li>
                    <li>No griefing/stealing.</li>
                    <li>Be respectful in chat.</li>
                    <li>Replant crops & trees.</li>
                    <li>Have fun & enjoy!</li>
                </ul>
            </div>

            <div class="card">
                <h2>Buy Ranks</h2>
                <p style="font-size: 0.85rem; color: #ddd; margin-bottom: 10px;">
                    Create a <b>Ticket</b> in Discord to purchase.
                </p>
                <ul class="rank-list">
                    <li class="rank-item">
                        <div class="rank-info">
                            <span class="rank-name" style="color: #a0f06d;">Fruit</span>
                            <span class="rank-perk">2 Sethomes</span>
                        </div>
                        <span class="rank-price">â‚¹19/wk</span>
                    </li>
                    <li class="rank-item">
                        <div class="rank-info">
                            <span class="rank-name" style="color: #ff6b6b;">Cake</span>
                            <span class="rank-perk">Starter Kit Included</span>
                        </div>
                        <span class="rank-price">â‚¹79/mo</span>
                    </li>
                    <li class="rank-item">
                        <div class="rank-info">
                            <span class="rank-name" style="color: #ff8c00;">Burn</span>
                            <span class="rank-perk">Premium Perks</span>
                        </div>
                        <span class="rank-price">â‚¹299/mo</span>
                    </li>
                    <li class="rank-item">
                        <div class="rank-info">
                            <span class="rank-name" style="color: #bf00ff;">Beast</span>
                            <span class="rank-perk">God Status</span>
                        </div>
                        <span class="rank-price">â‚¹499/mo</span>
                    </li>
                </ul>
                
                <a href="https://discord.gg/ZmCVr8c6sf" target="_blank" class="btn btn-store">
                    Join Discord to Buy
                </a>

                <div class="disclaimer">
                    <span class="no-refund">âš  No Refunds</span> â€¢ <span class="secure-badge">100% Trusted</span><br>
                    Payments are secure. All perks listed in Discord.
                </div>
            </div>

            <div class="card">
                <h2>Community</h2>
                <p style="color: #aaa; margin-bottom: 20px;">Join our massive community on Discord!</p>
                <a href="https://discord.gg/ZmCVr8c6sf" target="_blank" class="btn btn-discord" style="margin-top: auto;">
                    Launch Discord
                </a>
            </div>
        </div>
    </div>

    <script>
        // --- LOGIN & PROFILE LOGIC ---
        const usernameInput = document.getElementById('username-input');
        const skinPreview = document.getElementById('skin-preview');
        const bedrockToggle = document.getElementById('bedrock-toggle');
        const loginOverlay = document.getElementById('login-overlay');
        const mainContent = document.getElementById('main-content');
        const counterPill = document.getElementById('counter-pill');
        const userProfile = document.getElementById('user-profile');
        const profileHead = document.getElementById('profile-head');
        const profileName = document.getElementById('profile-name');
        const mainTitle = document.getElementById('main-title');

        usernameInput.addEventListener('input', function() {
            let name = this.value;
            if(name.length > 0) skinPreview.src = `https://minotar.net/helm/${name}/100.png`;
            else skinPreview.src = `https://minotar.net/helm/steve/100.png`;
        });

        function enterSite() {
            let name = usernameInput.value;
            if(!name) {
                usernameInput.style.borderColor = "red";
                setTimeout(() => usernameInput.style.borderColor = "#ff8e8b", 500);
                return;
            }

            if(bedrockToggle.checked && !name.startsWith('.')) name = "." + name;

            profileName.innerText = name;
            let skinName = name.startsWith('.') ? name.substring(1) : name;
            profileHead.src = `https://minotar.net/helm/${skinName}/100.png`;

            document.querySelector('.login-box').style.animation = "zoomOut 0.5s forwards";
            loginOverlay.style.opacity = "0";

            setTimeout(() => {
                loginOverlay.style.display = "none";
                document.body.style.overflow = "auto";
                mainContent.classList.add('wrapper-visible');
                counterPill.style.opacity = "1"; counterPill.style.transform = "translateY(0)";
                userProfile.style.opacity = "1"; userProfile.style.transform = "translateX(0)";
                mainTitle.innerText = `Welcome, ${name}`;
                if(name.length > 10) mainTitle.style.fontSize = "4rem";
            }, 500);
        }

        // --- HYPERSPACE ENGINE ---
        const canvas = document.getElementById('warp-canvas'); const ctx = canvas.getContext('2d');
        let width, height, stars = []; const numStars = 1000;
        let speed = 2; let warpSpeed = 50; let targetSpeed = speed; let currentSpeed = speed;
        const starColors = ['#ff007f', '#ff8e8b', '#ffffff', '#d1b3ff'];

        function initCanvas() {
            width = canvas.width = window.innerWidth; height = canvas.height = window.innerHeight;
            stars = []; for (let i = 0; i < numStars; i++) stars.push(new Star());
        }
        class Star {
            constructor() { this.reset(); }
            reset() {
                this.x = (Math.random() - 0.5) * width * 2; this.y = (Math.random() - 0.5) * height * 2;
                this.z = Math.random() * width; this.pz = this.z;
                this.color = starColors[Math.floor(Math.random() * starColors.length)];
            }
            update() { this.z -= currentSpeed; if (this.z <= 0) { this.reset(); this.pz = this.z; } }
            draw() {
                let fov = width;
                let sx = (this.x / this.z) * fov + width / 2; let sy = (this.y / this.z) * fov + height / 2;
                let px = (this.x / this.pz) * fov + width / 2; let py = (this.y / this.pz) * fov + height / 2;
                this.pz = this.z; ctx.beginPath(); ctx.moveTo(px, py); ctx.lineTo(sx, sy);
                let thickness = (1 - this.z / width) * 2; ctx.lineWidth = Math.max(thickness, 0.2);
                ctx.strokeStyle = this.color; ctx.stroke();
            }
        }
        function animateWarp() {
            currentSpeed += (targetSpeed - currentSpeed) * 0.05;
            ctx.fillStyle = 'rgba(2, 0, 5, 0.4)'; ctx.fillRect(0, 0, width, height);
            for (let i = 0; i < stars.length; i++) { stars[i].update(); stars[i].draw(); }
            requestAnimationFrame(animateWarp);
        }
        window.addEventListener('mousedown', () => targetSpeed = warpSpeed);
        window.addEventListener('mouseup', () => targetSpeed = speed);
        window.addEventListener('resize', initCanvas);
        initCanvas(); animateWarp();

        // --- 3D Card Tracking ---
        document.querySelectorAll('.card').forEach(card => {
            card.addEventListener('mousemove', (e) => {
                const rect = card.getBoundingClientRect();
                const x = e.clientX - rect.left; const y = e.clientY - rect.top;
                const centerX = rect.width / 2; const centerY = rect.height / 2;
                card.style.transform = `perspective(1000px) rotateX(${((y - centerY)/centerY)*-10}deg) rotateY(${((x - centerX)/centerX)*10}deg) scale3d(1.05, 1.05, 1.05)`;
            });
            card.addEventListener('mouseleave', () => card.style.transform = `perspective(1000px) rotateX(0deg) rotateY(0deg) scale3d(1, 1, 1)`);
        });

        function copyIP() {
            navigator.clipboard.writeText(document.getElementById("server-ip").innerText);
            document.querySelector(".btn-mc").innerText = "IP COPIED! ðŸŽ®";
            setTimeout(() => document.querySelector(".btn-mc").innerText = "Copy IP Address", 2000);
        }

        // --- Player Counter ---
        const serverIP = "play.sugarpie.net"; 
        async function updatePlayerCount() {
            try {
                const response = await fetch(`https://api.mcsrvstat.us/2/${serverIP}`);
                const data = await response.json();
                if (data.online) {
                    document.getElementById("player-count").innerText = `${data.players.online} Players Online`;
                    document.getElementById("status-dot").style.backgroundColor = "#00ff88";
                } else {
                    document.getElementById("player-count").innerText = "Server Offline";
                    document.getElementById("status-dot").style.backgroundColor = "#ff0033";
                }
            } catch (e) { document.getElementById("player-count").innerText = "Stats Unavailable"; }
        }
        updatePlayerCount(); setInterval(updatePlayerCount, 60000);
    </script>
</body>
</html>
